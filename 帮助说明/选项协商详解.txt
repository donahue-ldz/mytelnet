选项协商
虽然我们可以认为Telnet连接的双方都是NVT，但是实际上Telnet连接双方首先进行交互的信息是选项协商数据。Telnet通过客户进程和服务器进程之间的选项协商机制，确定通信双方可以提供的功能特性。选项协商是对称的，也就是说任何一方都可以主动发送选项协商请求给对方。
对于任何给定的选项，连接的任何一方都可以发送下面4种请求的任意一个请求：
1) WILL：发送方本身将激活选项。
2) DO：发送方想叫接收端激活选项。
3) WONT：发送方本身想禁止选项。
4) DONT：发送方想让接收端去禁止选项。
由于Telnet协议规定，对于激活选项请求，有权同意或者不同意。而对于使选项失效请求，必须同意。这样，4种请求就会组合出6种情况，如图2-2所示。
 
图2-2 Telnet选项协商的6种情况
选项协商需要3个字节：一个IAC字节，接着一个字节是WILL,DO,WONT和DONT这四者之一，最后一个ID字节指明激活或禁止的选项。现在，有40多个选项是可以协商的。RFC 1700文档中指明了选项字节的值，并且一些相关的RFC文档描述了这些选项。下表显示了在本客户端程序中会出现的选项代码。
表2-2 部分Telnet选项代码
选项标识符（十进制）	名称	RFC
1	回显	857
3	抑制继续进行	858
5	状态	859
6	定时标记	860
24	终端类型	1091
31	窗口大小	1073
32	终端速率	1079
33	远程流量控制	1372
34	行方式	1184
36	环境变量	1408
连接的双方都可以发起选项协商请求。但远程登录不是对称的应用，客户进程完成某些任务，而服务器进程则完成其他一些任务。某些Telnet选项仅仅适合于客户进程（例如要求激活行模式方式），某些选项则仅仅适合于服务器进程。
